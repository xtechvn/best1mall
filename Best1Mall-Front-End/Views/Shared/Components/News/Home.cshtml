@using Best1Mall_Front_End.ViewModels;
@using Best1Mall_Front_End.Utilities;
@model ArticleViewModel

@{
    var mainArticles = Model.obj_article_pinned?.Where(x => x.position == 1).Take(1).ToList() ?? new List<CategoryArticleModel>();
    var sideArticles = Model.obj_article_pinned?.Where(x => x.position == 2 || x.position == 3).OrderBy(x => x.position).ToList() ?? new List<CategoryArticleModel>();
    var remainingArticles = Model.obj_article_list ?? new List<CategoryArticleModel>();
    int d = 0;
}

<div class="list-news-top list-news flex flex-col lg:flex-row md:gap-6" id="article">
    <!-- MAIN ARTICLE -->
    <div class="top-news lg:w-2/3 w-full">
        @foreach (var item in mainArticles)
        {
            var link = Html.GetStaticUrlNews(item.title, item.id);
            <a href="@link">
                <div class="aspect-[5/3] w-full">
                    <img src="@item.image_169" alt="@item.title" class="w-full h-full object-cover md:rounded-3xl rounded-xl" />
                </div>
                <div class="mt-2">
                    <div class="text-sm text-gray-500 flex items-center gap-1 mb-1">
                        <span>@item.publish_date.ToString("dd/MM/yyyy") | @item.category_name?.Split(',').FirstOrDefault()</span>
                    </div>
                    <h2 class="text-xl font-semibold text-gray-800 mb-2">@item.title</h2>
                    <p class="text-gray-600 text-sm">@item.lead</p>
                </div>
            </a>
        }
    </div>

    <!-- SIDE ARTICLES -->
    <div class="next-news lg:w-1/3 w-full flex md:flex-row lg:flex-col flex-col md:gap-4">
        @foreach (var item in sideArticles)
        {
            var link = Html.GetStaticUrlNews(item.title, item.id);
            <a href="@link">
                <article class="space-y-3 md:border-0 border-t border-gray-200 mt-3 pt-3 md:mt-0 md:pt-0">
                    <div class="aspect-[5/3] w-full">
                        <img src="@item.image_169" alt="@item.title" class="w-full h-full object-cover rounded-xl" />
                    </div>
                    <div class="flex-1">
                        <div class="text-xs text-gray-500 mb-1 flex items-center gap-1">
                            <span>@item.publish_date.ToString("dd/MM/yyyy") | @item.category_name?.Split(',').FirstOrDefault()</span>
                        </div>
                        <p class="text-sm font-semibold text-gray-800 leading-snug">@item.title</p>
                    </div>
                </article>
            </a>
        }
    </div>
</div>


<!-- REMAINING ARTICLES -->
@await Html.PartialAsync("~/Views/Shared/Components/News/RemainingArticlesPartial.cshtml", Model)




<!-- PHÂN TRANG -->
@await Component.InvokeAsync("Pagination", new 
     { 
        page = ViewBag.page, 
        total_items = ViewBag.total_items, 
        total_page = ViewBag.total_page,
       page_size = ViewBag.page_size,
      view = "~/Views/Shared/Components/Pagination/Default.cshtml" 
     })
